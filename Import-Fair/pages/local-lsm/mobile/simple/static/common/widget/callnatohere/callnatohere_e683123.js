define("common:widget/callnatohere/callnatohere.js",function(t,e,n){"use strict";var a=t("core:widget/util/url-util.js"),i=t("core:widget/geolocation/location.js"),o=t("common:widget/util/native-util.js"),r=t("common:widget/util/device-util.js"),d=t("core:widget/stat/pbstat.js"),l="我的位置",c={gotoHere:function(t,e){if(this.isPermitCallup()){var n=this.parseParam(t),a=n.word||"",r=n.point||"";if(r){var c=r.split(",");2===c.length&&(r=c[1]+","+c[0])}var p="name:"+a+"|latlng:"+r,s=i.getLocation(),m=l,u=s.point||"",f=u?u.y+","+u.x:"",g="name:"+m+"|latlng:"+f,C=e.stat||"",A="baidumap://map/direction?mode=driving&origin="+encodeURIComponent(g)+"&destination="+encodeURIComponent(p)+"&coord_type=bd09mc&src=webapp.default.all."+C;o.callNA(A,{forbidDownLoad:!0}),d.addStat(COM_PB_STAT.CALLNA_TOHERE_LIST)}},parseParam:function(t){var e=null,n=/&end=(.*)&tab=line/i;if(n.test(t)&&RegExp.$1){var i=decodeURIComponent(decodeURIComponent(RegExp.$1));e=a.urlToJSON(i)}return e},parseStartEndInfo:function(t,e){var n=t.word||l,a=t.point||"";if(a){var i=a.split(",");2===i.length&&(a=i[1]+","+i[0])}else a="-1,-1";var o="name:"+n+"|latlng:"+a;r.isAndroid()&&"-1,-1"===a&&(o=n);var d=e.word||l,c=e.point||"";if(c){var p=c.split(",");2===p.length&&(c=p[1]+","+p[0])}else c="-1,-1";var s="name:"+d+"|latlng:"+c;return r.isAndroid()&&"-1,-1"===c&&(s=d),[o,s]},callTransit:function(t,e,n){if(this.isPermitCallup()){var a=this.parseStartEndInfo(e,n),i=a[0],r=a[1],l="baidumap://map/direction?mode=transit&origin="+encodeURIComponent(i)+"&destination="+encodeURIComponent(r)+"&coord_type=bd09mc&src=webapp.default.all.callnatoheretransit";o.callNA(l,{forbidDownLoad:!0}),d.addStat(COM_PB_STAT.CALLNA_TOHERE_TRANSIT)}},callDrive:function(t,e,n){if(this.isPermitCallup()){var a=this.parseStartEndInfo(e,n),i=a[0],r=a[1],l="baidumap://map/direction?mode=driving&origin="+encodeURIComponent(i)+"&destination="+encodeURIComponent(r)+"&coord_type=bd09mc&src=webapp.default.all.callnatoheredriving";o.callNA(l,{forbidDownLoad:!0}),d.addStat(COM_PB_STAT.CALLNA_TOHERE_DRIVING)}},callWalk:function(t,e,n){if(this.isPermitCallup()){var a=this.parseStartEndInfo(e,n),i=a[0],r=a[1],l="baidumap://map/direction?mode=walking&origin="+encodeURIComponent(i)+"&destination="+encodeURIComponent(r)+"&coord_type=bd09mc&src=webapp.default.all.callnatoherewalking";o.callNA(l,{forbidDownLoad:!0}),d.addStat(COM_PB_STAT.CALLNA_TOHERE_WALKING)}},callCycle:function(t,e,n){if(this.isPermitCallup()){var a=this.parseStartEndInfo(e,n),i=a[0],r=a[1],l="baidumap://map/direction?mode=riding&origin="+encodeURIComponent(i)+"&destination="+encodeURIComponent(r)+"&coord_type=bd09mc&src=webapp.default.all.callnatohereriding";o.callNA(l,{forbidDownLoad:!0}),d.addStat(COM_PB_STAT.CALLNA_TOHERE_RIDING)}},isPermitCallup:function(){var t=navigator.userAgent;return/Weibo/i.test(t)||/MicroMessenger/i.test(t)?!1:!0}};n.exports=c});